<div class="container mx-auto px-4 lg:px-6 py-12">
  <div class="max-w-7xl mx-auto">
    <!-- 페이지 헤더 -->
    <div class="mb-8">
      <div class="flex items-center space-x-3 mb-4">
        <%= link_to mypage_path, class: "text-gray-500 hover:text-purple-600 transition-colors" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        <% end %>
        <h1 class="text-3xl font-bold text-gray-900">취소/교환/반품</h1>
      </div>
      <p class="text-gray-600">주문 취소, 교환, 반품 내역을 확인하실 수 있습니다</p>
    </div>

    <!-- 메인 레이아웃 -->
    <div class="flex flex-col lg:flex-row gap-8">
      <!-- 사이드바 -->
      <div class="lg:w-64">
        <div class="bg-white rounded-xl shadow-lg p-6 sticky top-24">
          <h2 class="text-lg font-bold text-gray-900 mb-6 pb-3 border-b border-gray-200">
            <a href="<%= mypage_path %>" class="hover:text-purple-600 transition-colors">마이페이지</a>
          </h2>
          
          <ul class="space-y-6">
            <li>
              <div class="font-semibold text-gray-800 mb-3">나의 주문내역</div>
              <ul class="space-y-2 pl-4">
                <li><a href="<%= mypage_orders_path %>" class="text-gray-600 hover:text-purple-600 transition-colors">주문/배송조회</a></li>
                <li><a href="<%= mypage_cancellations_path %>" class="text-purple-600 font-medium">취소/교환/반품</a></li>
              </ul>
            </li>
            
            <li>
              <div class="font-semibold text-gray-800 mb-3">나의 혜택</div>
              <ul class="space-y-2 pl-4">
                <li><a href="<%= mypage_benefits_path %>" class="text-gray-600 hover:text-purple-600 transition-colors">등급별 혜택 안내</a></li>
                <li><a href="<%= mypage_coupons_path %>" class="text-gray-600 hover:text-purple-600 transition-colors">쿠폰 현황/다운로드</a></li>
                <li><a href="#" class="text-gray-600 hover:text-purple-600 transition-colors">포인트 현황</a></li>
                <li><a href="#" class="text-gray-600 hover:text-purple-600 transition-colors">통합멤버십 안내</a></li>
              </ul>
            </li>
            
            <li>
              <div class="font-semibold text-gray-800 mb-3">나의 쇼핑</div>
              <ul class="space-y-2 pl-4">
                <li><a href="#" class="text-gray-600 hover:text-purple-600 transition-colors">최근 본 상품</a></li>
                <li><a href="#" class="text-gray-600 hover:text-purple-600 transition-colors">위시리스트</a></li>
                <li><a href="#" class="text-gray-600 hover:text-purple-600 transition-colors">찜 브랜드</a></li>
              </ul>
            </li>
            
            <li>
              <div class="font-semibold text-gray-800 mb-3">나의 활동</div>
              <ul class="space-y-2 pl-4">
                <li><a href="<%= mypage_reviews_path %>" class="text-gray-600 hover:text-purple-600 transition-colors">상품리뷰</a></li>
                <li><a href="#" class="text-gray-600 hover:text-purple-600 transition-colors">상품문의</a></li>
                <li><a href="<%= mypage_inquiries_path %>" class="text-gray-600 hover:text-purple-600 transition-colors">1:1 문의</a></li>
                <li><a href="#" class="text-gray-600 hover:text-purple-600 transition-colors">이벤트 참여내역</a></li>
              </ul>
            </li>
            
            <li>
              <div class="font-semibold text-gray-800 mb-3">개인정보관리</div>
              <ul class="space-y-2 pl-4">
                <li><a href="#" class="text-gray-600 hover:text-purple-600 transition-colors">개인정보수정</a></li>
                <li><a href="#" class="text-gray-600 hover:text-purple-600 transition-colors">배송지 관리</a></li>
                <li><a href="#" class="text-gray-600 hover:text-purple-600 transition-colors">환불계좌관리</a></li>
                <li><a href="#" class="text-gray-600 hover:text-purple-600 transition-colors">회원탈퇴</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>

      <!-- 메인 컨텐츠 -->
      <div class="flex-1">
        <!-- 기간 선택 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
          <form id="searchForm">
            <div class="flex flex-wrap items-center gap-4 mb-4">
              <!-- 기간 버튼 -->
              <div class="flex space-x-2">
                <label class="inline-flex items-center">
                  <input type="radio" name="period" value="1" class="form-radio text-purple-600" onchange="setPeriod(1)">
                  <span class="ml-2 text-sm">1개월</span>
                </label>
                <label class="inline-flex items-center">
                  <input type="radio" name="period" value="3" class="form-radio text-purple-600" onchange="setPeriod(3)" checked>
                  <span class="ml-2 text-sm">3개월</span>
                </label>
                <label class="inline-flex items-center">
                  <input type="radio" name="period" value="6" class="form-radio text-purple-600" onchange="setPeriod(6)">
                  <span class="ml-2 text-sm">6개월</span>
                </label>
                <label class="inline-flex items-center">
                  <input type="radio" name="period" value="12" class="form-radio text-purple-600" onchange="setPeriod(12)">
                  <span class="ml-2 text-sm">1년</span>
                </label>
              </div>
            </div>
            
            <!-- 날짜 선택 -->
            <div class="flex items-center space-x-4">
              <div class="flex items-center space-x-2">
                <input type="date" id="startDate" class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                <span class="text-gray-500">~</span>
                <input type="date" id="endDate" class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                <button type="button" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm">조회</button>
              </div>
            </div>
          </form>
        </div>

        <!-- 안내사항 -->
        <div class="bg-purple-50 border border-purple-200 rounded-xl p-4 mb-6">
          <p class="text-purple-800 text-sm">
            교환/반품 처리 기간의 경우 교환은 <span class="font-semibold text-purple-900">평균 2주 이상,</span> 
            반품은 <span class="font-semibold text-purple-900">평균 5일</span> 소요됩니다.(주말/공휴일 제외)
          </p>
        </div>

        <!-- 결과 헤더 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
          <div class="flex items-center justify-between mb-4">
            <div class="text-lg font-medium">
              총 <strong class="text-purple-600">0</strong>개
            </div>
            <div class="relative">
              <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                <option value="">전체</option>
                <option value="cancel">취소</option>
                <option value="change">교환</option>
                <option value="return">반품</option>
              </select>
            </div>
          </div>

          <!-- 목록 헤더 -->
          <div class="hidden md:grid grid-cols-5 gap-4 py-3 border-b border-gray-200 text-sm font-medium text-gray-700">
            <div>상품정보</div>
            <div class="text-center">수량</div>
            <div class="text-center">상품금액</div>
            <div class="text-center">진행상태</div>
            <div class="text-center">선택</div>
          </div>

          <!-- 검색 결과 없음 -->
          <div class="text-center py-12">
            <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
              <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
            </div>
            <h3 class="text-lg font-medium text-gray-900 mb-2">검색된 주문/배송 내역이 없습니다</h3>
            <p class="text-gray-600 mb-6">아직 취소, 교환, 반품 신청 내역이 없습니다.</p>
            <%= link_to "주문 내역 보기", mypage_orders_path, class: "inline-block bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors" %>
          </div>
        </div>

        <!-- 교환배송비 입금정보 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
          <h2 class="text-xl font-bold text-gray-900 mb-4">교환배송비 입금정보</h2>
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <ul class="space-y-2 text-sm text-blue-800">
              <li>• 고객센터를 통해 교환배송비 입금 안내를 받으신 경우 아래의 입금 정보를 확인 부탁드립니다</li>
              <li>• <span class="font-semibold">예금주</span> : 주식회사 럭스스토어</li>
              <li>• <span class="font-semibold">계좌번호</span> : 우리은행 / 1005-102-666509</li>
              <li>• <span class="font-semibold">교환배송비</span> : 5,000원</li>
            </ul>
          </div>
        </div>

        <!-- 안내 및 유의사항 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
          <h2 class="text-xl font-bold text-gray-900 mb-4">안내 및 유의사항</h2>
          <div class="space-y-3 text-sm text-gray-700">
            <p>• 주문취소는 상품준비중 단계까지만 가능합니다. 배송준비중 단계에서 주문취소를 원하는 경우 고객센터로 문의주세요.</p>
            <p>• 주문 상품 중 일부만 취소할 경우 결제 수단에 따라 재결제가 필요하며, 재 결제 완료 후 나머지 상품에 대한 주문이 완료됩니다</p>
            <p>• 교환/반품은 배송완료 후 7일 이내에만 신청하실 수 있습니다. 7일 경과 후 상품 하자 또는 오배송으로 인한 교환/반품은 고객센터로 문의해주세요</p>
            <p>• 부분 취소/반품 시 취소/반품 후 결제금액이 사용하신 쿠폰 적용 기준에 해당되지 않을 경우에는 추가 금액이 발생할 수 있습니다<br>(결제수단에 따라 추가 금액 차감 후 환불 처리 또는 재결제 필요)</p>
            <p>• 교환/반품 처리 기간의 경우 교환은 평균 2주 이상 반품은 평균 5일 소요됩니다 (주말/공휴일 제외)</p>
            <p>• 환불은 결제수단에 따라 주말/공휴일 제외 평균 3~7일 소요됩니다</p>
            <p>• 교환/반품은 배송 완료 후 7일 이내에만 신청하실 수 있습니다</p>
            <p>• 상품 하자의 경우 상품을 공급받은 날로부터 3개월 이내, 그 사실을 안 날 또는 알 수 있었던 날부터 30일 이내 중 먼저 도래하는 기간 내로 청약철회 가능합니다<br>해당사항이 있는 경우 고객센터로 문의 부탁드립니다.</p>
            <p>• 주문 시 사용한 쿠폰은 취소/반품 후 경우에 따라 복원되지 않을 수 있습니다 (쿠폰 및 기획전 유의사항 확인 필요)</p>
          </div>
        </div>

        <!-- 교환단계 안내 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
          <h2 class="text-xl font-bold text-gray-900 mb-6">교환단계 안내</h2>
          
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
            <!-- STEP 1 -->
            <div class="text-center">
              <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                </svg>
              </div>
              <h3 class="font-bold text-gray-900 mb-1">STEP 1. 교환신청</h3>
              <p class="text-sm text-gray-600">교환 신청이 접수되었습니다<br>수거를 위해 택배기사님이 방문합니다</p>
            </div>

            <!-- STEP 2 -->
            <div class="text-center">
              <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
                </svg>
              </div>
              <h3 class="font-bold text-gray-900 mb-1">STEP 2. 상품수거중</h3>
              <p class="text-sm text-gray-600">교환상품을 수거하여<br>물류센터로 이동 중입니다</p>
            </div>

            <!-- STEP 3 -->
            <div class="text-center">
              <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                </svg>
              </div>
              <h3 class="font-bold text-gray-900 mb-1">STEP 3. 상품검수중</h3>
              <p class="text-sm text-gray-600">교환 상품이 물류센터로 도착 후<br>상품 검수 진행 중입니다</p>
            </div>

            <!-- STEP 4 -->
            <div class="text-center">
              <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              </div>
              <h3 class="font-bold text-gray-900 mb-1">STEP 4. 상품검수 완료</h3>
              <p class="text-sm text-gray-600">교환 사유가 상이하거나 부분 환불 시<br>재 결제 비용이 발생할 수 있습니다</p>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- STEP 5 -->
            <div class="text-center">
              <div class="w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
                </svg>
              </div>
              <h3 class="font-bold text-gray-900 mb-1">STEP 5. 교환상품 배송 준비중</h3>
              <p class="text-sm text-gray-600">교환 상품 준비가 완료되어<br>곧 배송 될 예정입니다</p>
            </div>

            <!-- STEP 6 -->
            <div class="text-center">
              <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              </div>
              <h3 class="font-bold text-gray-900 mb-1">STEP 6. 교환상품 배송중</h3>
              <p class="text-sm text-gray-600">교환 상품의 배송이<br>시작되었습니다</p>
            </div>

            <!-- STEP 7 -->
            <div class="text-center">
              <div class="w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                </svg>
              </div>
              <h3 class="font-bold text-gray-900 mb-1">STEP 7. 교환상품 배송완료</h3>
              <p class="text-sm text-gray-600">상품 배송이 완료되었습니다<br>상품평을 작성해 주세요</p>
            </div>
          </div>

          <div class="mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
            <p class="text-sm text-yellow-800"><span class="font-bold">STEP 1</span> : 교환 철회 가능</p>
          </div>
        </div>

        <!-- 반품단계 안내 -->
        <div class="bg-white rounded-xl shadow-lg p-6">
          <h2 class="text-xl font-bold text-gray-900 mb-6">반품단계 안내</h2>
          
          <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6">
            <!-- STEP 1 -->
            <div class="text-center">
              <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                </svg>
              </div>
              <h3 class="font-bold text-gray-900 mb-1">STEP 1. 반품신청</h3>
              <p class="text-sm text-gray-600">반품 신청이 접수되었습니다<br>수거를 위해 택배기사님이 방문합니다</p>
            </div>

            <!-- STEP 2 -->
            <div class="text-center">
              <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
                </svg>
              </div>
              <h3 class="font-bold text-gray-900 mb-1">STEP 2. 상품수거중</h3>
              <p class="text-sm text-gray-600">반품상품을 수거하여<br>물류센터로 이동 중입니다</p>
            </div>

            <!-- STEP 3 -->
            <div class="text-center">
              <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                </svg>
              </div>
              <h3 class="font-bold text-gray-900 mb-1">STEP 3. 상품검수중</h3>
              <p class="text-sm text-gray-600">반품 상품이 물류센터로 도착 후<br>상품 검수 진행 중입니다</p>
            </div>

            <!-- STEP 4 -->
            <div class="text-center">
              <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              </div>
              <h3 class="font-bold text-gray-900 mb-1">STEP 4. 반품처리중</h3>
              <p class="text-sm text-gray-600">반품 사유가 상이하거나 부분 환불 시<br>재 결제 비용이 발생할 수 있습니다</p>
            </div>

            <!-- STEP 5 -->
            <div class="text-center">
              <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3">
                <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                </svg>
              </div>
              <h3 class="font-bold text-gray-900 mb-1">STEP 5. 반품완료</h3>
              <p class="text-sm text-gray-600">반품처리가 완료되었습니다 결제수단별 절차에 따라 환불이 진행됩니다<br>환불은 반품완료 후 결제수단에 따라 3~7일정도 소요될 수 있습니다</p>
            </div>
          </div>

          <div class="mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
            <p class="text-sm text-yellow-800"><span class="font-bold">STEP 1</span> : 반품 철회 가능</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const startDate = document.getElementById('startDate');
  const endDate = document.getElementById('endDate');
  
  // 기본값 설정 (3개월)
  setPeriod(3);
});

function setPeriod(months) {
  const today = new Date();
  const startDate = document.getElementById('startDate');
  const endDate = document.getElementById('endDate');
  
  let startDateObj;
  if (months === 12) {
    startDateObj = new Date(today.getFullYear() - 1, today.getMonth(), today.getDate());
  } else {
    startDateObj = new Date(today.getFullYear(), today.getMonth() - months, today.getDate());
  }
  
  startDate.value = startDateObj.toISOString().split('T')[0];
  endDate.value = today.toISOString().split('T')[0];
}
</script>